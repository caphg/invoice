<%= form_for(@bill) do |f| %>
  <% if @bill.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@bill.errors.count, "error") %> prohibited this bill from being saved:</h2>

      <ul>
      <% @bill.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= f.label :notice %><br>
    <%= f.text_field :notice, value: @bill.notice %>
  </div>
  <div class="form-group">
    <%= f.label :footer %><br>
    <%= f.text_field :footer, value: @bill.footer %>
  </div>

  <%= content_tag :a, "New service", href: "#modal", class: 'btn btn-primary', data: {toggle: 'modal'} %>

  <div class="modal fade" tabindex="-1" role="dialog" id="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">New service...</h4>
        </div>
        <div class="modal-body">
          <%= f.fields_for :services do |s| %>
            <div class="form-group">
              <%= s.label :name %>
              <%= s.text_field :name %>
            </div>
            <div class="form-group">
              <%= s.label :description %>
              <%= s.text_field :description %>
            </div>
            <div class="form-group">
              <%= s.label :amount %>
              <%= s.text_field :amount %>
            </div>
            <div class="form-group">
              <%= s.label :quantity %>
              <%= s.text_field :quantity %>
            </div>
            <div class="form-group">
              <%= s.label :currency %>
              <%= s.text_field :currency %>
            </div>
          <% end %>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <%= f.submit "Save", class: 'btn btn-primary' %>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <% @bill.services.each do |s| %>
      <div class="field">
        Name: <br>
        <%= s.name %>
      </div>
      <div class="field">
        Description<br>
        <%= s.description %>
      </div>
      <div class="field">
        Amount<br>
        <%= s.amount %>
      </div>
      <div class="field">
        Currency<br>
        <%= s.currency %>
      </div>
      <div class="field">
        Quantity<br>
        <%= s.quantity %>
      </div>
  <% end %>
  <div class="form-group">
    <%= f.submit "Save", class: 'btn btn-primary' %>
  </div>
<% end %>
